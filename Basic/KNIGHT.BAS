0 'COPYRIGHT 1990, FALSOFT INC.
10 CLS:HBUFF1,1296:HBUFF2,1296:HBUFF3,1296:HBUFF4,1296:DIMA$(16),V(5,5),W(5,5):INPUT"INITIALIZE SPEED-UP POKE? (Y/N)";I$:I$=LEFT$(I$,1):IFI$="Y"THENPOKE65497,0
20 HSCREEN2:PALETTE0,32:PALETTE1,0:PALETTE2,63:PALETTE3,16:FORY=1TO2:HCOLORY,0:HDRAW"BM14,44R30U2L30ND2RUR2NR24UR3URU3RURU2RU3R3E4M+1,-3U3BM-8,+9M-2,-1M-5,+2GL2HUR2M+4,-1BL6BD1H1U2M+9,-6M+1,-2E2R2M+2,-1R2LUM+2,-3D2ERD2M-1,+2D2BH2U"
30 HDRAW"BM44,42H4M-1,-4U2M+1,+2NU14M-2,-4U8M-2,-4H2BU2NL2M+3,+1F3D2":IFY=1THENHPAINT(34,34),2,1ELSEHPAINT(34,34),1,2
40 IFY=1THENC=2:D=3ELSEC=1:D=2
50 HCOLORC,0:HLINE(15,43)-(43,43),PSET:RESTORE
60 FORX=1TO50:READA,B:HSET(A,B,D):NEXT
70 HGET(10,10)-(46,46),Y
80 HCLS0:NEXTY:HCOLOR2:HGET(100,100)-(136,136),3
90 FORX=1TO25:READA,B,C:HPUT(A,B)-(A+36,B+36),C:NEXT:HCOLOR2:HLINE(40,5)-(220,185),PSET,B:FORX=40TO220STEP36:HLINE(X,5)-(X,185),PSET:NEXT:FORX=5TO185STEP36:HLINE(40,X)-(220,X),PSET:NEXT
100 HPRINT(30,1),"KNIGHT'S":HPRINT(31,3),"ERRANT":HPRINT(30,5),"PRESS (M)":HPRINT(30,6),"TO MOVE":HPRINT(30,7),"PIECES.":HPRINT(30,12),"SCORE:":HPRINT(32,13),S
110 X=3:Y=3:FORZ=1TO16:READA$(Z):NEXT:Z=0:FORA=1TO5:FORB=1TO5:READC:W(A,B)=C:NEXTB,A:A=0:B=0:C=0
120 GOSUB410:GOSUB460
130 I$=INKEY$
140 IFI$=CHR$(8)THENX=X-1:GOSUB410:GOTO120
150 IFI$=CHR$(9)THENX=X+1:GOSUB410:GOTO120
160 IFI$=CHR$(10)THENY=Y+1:GOSUB410:GOTO120
170 IFI$=CHR$(94)THENY=Y-1:GOSUB410:GOTO120
180 IFI$="M"THEN200
190 GOTO120
200 Q=0:U$(1)="L":U$(2)="R":U$(3)="D":U$(4)="U":A=X:B=Y
210 Q=Q+1:IFQ=4THEN280
220 I$=INKEY$:O=X:L=Y:X=A:Y=B:GOSUB350:GOSUB460:X=O:Y=L
230 IFI$=CHR$(8)THENA=A-1:M=1:GOSUB350:GOSUB340:GOTO210
240 IFI$=CHR$(9)THENA=A+1:M=2:GOSUB350:GOSUB340:GOTO210
250 IFI$=CHR$(10)THENB=B+1:M=3:GOSUB350:GOSUB340:GOTO210
260 IFI$=CHR$(94)THENB=B-1:M=4:GOSUB350:GOSUB340:GOTO210
270 GOTO220
280 GOSUB400:FORZ=1TO16:IFM$=A$(Z)THEN290ELSENEXT:SOUND1,1:Z=0:Q=0:M$="":GOTO120
290 HGET((X-1)*36+40,(Y-1)*36+5)-(X*36+40,Y*36+5),4:HPUT((X-1)*36+40,(Y-1)*36+5)-(X*36+40,Y*36+5),3:HLINE((X-1)*36+40,(Y-1)*36+5)-(X*36+40,Y*36+5),PSET,B:HPUT((A-1)*36+40,(B-1)*36+5)-(A*36+40,B*36+5),4:Q=0:Z=0:M$=""
300 HCOLOR0:HPRINT(32,13),S:S=S+1:HCOLOR2:HPRINT(32,13),S
310 V(A,B)=HPOINT((A-1)*36+53,(B-1)*36+18):V(X,Y)=3:X=A:Y=B
320 FORA=1TO5:FORB=1TO5:IFV(A,B)=W(A,B) THENNEXTB,A ELSEA=0:B=0:GOTO120
330 FORX=1TO50:PALETTE 0,RND(63):NEXT:PALETTE0,16:HCLS:HPRINT(10,10),"CONGRATULATIONS!":HPRINT(10,12),"YOUR SCORE IS:"+STR$(S):HPRINT(10,15),"PRESS <ENTER> TO END":LINEINPUTO$:HSCREEN0:CLS:END
340 M$=M$+U$(M):RETURN
350 IFA=<1THENA=1
360 IFA=>5THENA=5
370 IFB=<1THENB=1
380 IFB=>5THENB=5
390 RETURN
400 IFHPOINT((A-1)*36+60,(B-1)*36+25)<>0THENZ=0:Q=0:M$="":RETURNELSERETURN
410 IFX=<1THENX=1
420 IFX=>5THENX=5
430 IFY=<1THENY=1
440 IFY=>5THENY=5
450 RETURN
460 HGET((X-1)*36+40,(Y-1)*36+5)-(X*36+40,Y*36+5),4:HPUT((X-1)*36+40,(Y-1)*36+5)-(X*36+40,Y*36+5),3:HPUT((X-1)*36+40,(Y-1)*36+5)-(X*36+40,Y*36+5),4:RETURN
470 DATA 27,30,27,32,26,34,25,35,23,36,23,38,21,39,29,29,29,31,28,33,27,34,25,35,25,37,23,39,31,28,31,30,30,32,30,34,28,36,26,30,26,18,25,18,26,19,24,18,24,19,18,24,17,24,17,26,14,26,23,21,24,20,26,20,16,26,30,38,30,36,30,28,30,28,29,32,24,32,30,39
480 DATA 32,26,32,28,32,29,32,32,32,36,33,39,30,39,28,39,26,39,24,39
490 DATA 40,5,2,76,5,1,112,5,1,148,5,1,184,5,1,40,41,2,76,41,1,112,41,1,148,41,1,184,41,1,40,77,2,76,77,2,148,77,1,184,77,1,40,113,2,76,113,2,112,113,2,148,113,2,184,113,1,40,149,2,76,149,2,112,149,2,148,149,2,184,149,1,112,77,3
500 DATA RDD,LDD,UUL,UUR,DRR,URR,LLU,LLD,DDL,DDR,RUU,LUU,RRU,RRD,ULL,DLL,2,2,2,2,2,1,1,2,2,2,1,1,3,2,2,1,1,1,2,2,1,1,1,1,1
10 'KNIGHT SHIFT
20 'WRITTEN BY NEIL AND WARREN      HARRIS
30 'COPYRIGHT (C) APRIL 1991
35 'BY FALSOFT, INC.
40 'RAINBOW MAGAZINE
50 CLEAR2000
60 SD(1)=150:SD(2)=87
70 FORT=1TO7:READHP(T):NEXT
80 DATA 7,43,79,115,151,187,223
90 PL=1:X1=4:Y1=30:X2=4:Y2=180
100 PL=1:X(1)=4:Y(1)=30:X(2)=4:Y(2)=180
110 PMODE3,1
120 PCLS:IF PEEK(33021)=50 THEN PALETTE 5,3:POKE 65497,0 ELSE POKE 65495,0
130 S1=100:S2=100
140 S$="BM0,32"
150 A$="U10;L2;U3;R4;D2;U2;R4;D2;U2;R4;D3;L2;D10;L8;R25;U10;R2;U3;L4;D2;U2;L4;D2;U2;L4;D3;R2;D10;R3;L3;U7;L9;BL4;L1;U1;R1;D1;BR17;R1;U1;L1;D1;BD3;BL8;L1;D4;R1;U4;D4"
160 AR$="BR3;U15;R4;D1;R9;U1;R4;D15;L1;D1;L2;D1;L2;D1;L7;U1;L2;U1;L2;U1;L1"
170 GOSUB 760
180 FORT=30TO190STEP25:SOUNDT,1:DRAW"C2;BM0,"+STR$(T)+";BR6;XA$;BR23;XA$;BR23;XA$;BR23;XA$;BR23;XA$;BR23;XA$;BR23;XA$;":NEXT
190 PY$="BM0,7;C2;U7;R5;D4;L5;BR7;BU4;BR4;D7;R4;BR6;U7;R4;D7;U3;L4;BR9;BU4;D3;BF1;R3;E1;U3;BG2;BD2;D3;BR8;U7;R4;BD7;L4;U3;R2;BR8;D3;U7;R4;D4;L3;F3"
200 P1$="BM68,7;R4;L2;U7;L1;G1;BD6"
210 P2$="BM68,7;R4;L4;U3;R4;U4;L4;BD7"
220 MV$="BM210,7;U7;F3;E4;D7;BR6;R5;U7;L5;D7;BR13;H2;U5;BR5;D5;G2;BR8;U7;R4;BD7;L4;U3;R2"
230 BX$="BG5;R33;U23;L33;D23"
240 AK$="BM200,7;U7;R4;D7;U3;L4;BR9;BU4;R4;L2;D7;BR8;U7;L2;R4;BR6;R4;D7;BL4;U7;D4;R4;BR6;D3;R4;BU7;L4;D3;BR12;E3;BL5;D3;R1;F4;BL5;U5"
250 MN$="BR5;R15;H1;U2;H1;U2;H1;U1;R3;U3;L3;D2;L3;U2;L3;D2;L3;U2;L3;D4;R3
260 M$(1)="BR5;BU2;U15;R4;D1;R9;U1;R4;D15;L1;D1;L2;D1;L2;D1;L7;U1;L2;U1;L2;U1;L1;BD1;E16;BL7;BD5D1;U1;BU5;BL8;F16"
270 M$(2)="BR5;BU2;U15;R4;D1;R9;U1;R4;D15;L1;D1;L2;D1;L2;D1;L7;U1;L2;U1;L2;U1;L1;BR8;BD3;U17;D7;L7;R14"
280 GOTO330
290 SOUND 87,1:SX=X(1):SY=Y(1):GOSUB650:DRAW"D15;C0;XM$(1);":RETURN
300 SOUND 87,1:SX=X(2):SY=Y(2):GOSUB650:DRAW"D15;C3;XM$(2);":RETURN
310 DRAW "BM"+STR$(HP(X(1)))+","+STR$(Y(1))+";C0;XBX$;C1;":RETURN
320 DRAW"BM"+STR$(HP(X(2)))+","+STR$(Y(2))+";C3;XBX$;C2;":RETURN
330 DRAW"XPY$;"
340 GOSUB290:PL=2:GOSUB300:PL=1
350 SOUND 200,1:GOSUB310:SOUND188,1:GOSUB320:IFPL=1THENDRAW"C2;XP1$;":ELSEDRAW"C2;XP2$;"
360 DRAW"C2;XMV$;":SX=X(PL):SY=Y(PL):GOSUB530
370 IFSX=X(PL)ANDSY=Y(PL)THEN360:ELSEIFSX+1<>X(PL)ANDSX-1<>X(PL)ANDSX<>X(PL)THENGOSUB550:GOTO370:ELSEIFSY<>Y(PL)ANDSY+25<>Y(PL)ANDSY-25<>Y(PL)THENGOSUB550:GOTO370
380 GOSUB670:IFP<>5THENGOSUB550:GOTO370
390 DRAW"BM"+STR$(HP(SX))+","+STR$(SY)+";C1;BL2;BD2;XM$(PL);BM"+STR$(HP(SX))+","+STR$(SY)+";C2;BL1;XA$;":ON PL GOSUB290,300
400 SOUND24,1:DRAW"C1;XMV$;C2;XAK$;":SX=X(PL):SY=Y(PL):SOUND24,1
410 GOSUB530
420 IFPL=1ANDX(1)=X(2)ANDY(1)=Y(2)THENGOSUB550:GOTO420:ELSEIFSX=X(1)ANDSY=Y(1)THENGOSUB550:GOTO420
430 GOSUB670:IFP<>5THENGOSUB550:GOTO420
440 IFSX=X(PL)ANDSY=Y(PL)THEN410:ELSEIFSX=X(PL)ORSY=Y(PL)THENGOSUB660:GOSUB650:GOTO460
450 GOSUB660:FORT=1TO7:IFSX+T<>X(PL)ANDSX-T<>X(PL)THENNEXT:GOSUB660:GOSUB550:GOTO420:ELSEIFSY-(T*25)=Y(PL)ORSY+(T*25)=Y(PL)THENDRAW"BM"+STR$(HP(SX))+","+STR$(SY)+";C1;":GOSUB650:ELSENEXT
460 IF PL=1 THEN CL=0 ELSE CL=3
470 DRAW"D13;R2;C"+STR$(CL)+";XAR$;BM"+STR$(HP(SX))+","+STR$(SY)+";C1;XBX$;C3":PAINT(HP(SX)+7,SY-5),CL,CL
480 FORT=1TO2:H1=X(T):H2=Y(T):FORT2=-1TO1:FORT3=-1TO1:X(T)=H1+T2:Y(T)=H2+(T3*25):GOSUB680:IFP<>5THEN:NEXTT3:NEXTT2:GOTO690:ELSEX(T)=H1:Y(T)=H2:NEXTT
490 DRAW"C1;XAK$;XP1$;XP2$;C0;":IFPL=1THENPL=2:ELSEPL=1
500 GOTO350
510 GOTO360
520 POKE338,255:DRAW"C0;XMV$;":GOSUB530:DRAW"C1;XMV$;C0;XAK$;":POKE338,255:GOSUB530:DRAW"C1;XAK$;":GOTO520
530 LX=SX:LY=SY:IFPL=1THENFR=254:JH=0:JV=1:ELSEFR=253:JV=3:JH=2
540 GOSUB310:GOSUB320
550 JX=X(PL):JY=Y(PL):POKE338,255:DD=JOYSTK(0):DD=JOYSTK(1):H=JOYSTK(JH):V=JOYSTK(JV):ON PL GOSUB320,310
560 IFH=63ANDLX<>7THEN:IFV=63ANDLY<180THENGOSUB640:LX=LX+1:LY=LY+25:GOTO600:ELSEIFV=0ANDLY>30THENGOSUB640:LX=LX+1:LY=LY-25:GOTO600
570 IFH=0ANDLX<>1THENIFV=0ANDLY>30THENGOSUB640:LX=LX-1:LY=LY-25:GOTO600:ELSEIFV=63ANDLY<180THENGOSUB640:LY=LY+25:LX=LX-1:GOTO600
580 IFH=63ANDLX<>7THENGOSUB640:LX=LX+1:ELSEIFH=0ANDLX<>1THENGOSUB640:LX=LX-1:ELSEIFV=63ANDLY<180THENGOSUB640:LY=LY+25:ELSEIFV=0ANDLY>30THENGOSUB640:LY=LY-25
590  IF PL=1 THEN CL=0 ELSE CL=3
600 IF LX<>JX OR LY<>JY THEN SOUNDSD(PL),1:DRAW"BM"+STR$(HP(LX))+","+STR$(LY)+";C"+STR$(CL)+";XBX$;":
610 X(PL)=LX:Y(PL)=LY
620 IFPEEK(338)= FR THENFORT=175TO125STEP-25:SOUNDT,1:NEXT:RETURN
630 GOTO550
640 DRAW"BM"+STR$(HP(LX))+","+STR$(LY)+";C1;XBX$;":RETURN
650 DRAW"BM"+STR$(HP(SX))+","+STR$(SY)+"C1;L2;":FORT=1TO13:DRAW"R27;U1;L27":NEXT:RETURN
660 A=X(PL):B=Y(PL):X(PL)=SX:Y(PL)=SY:SX=A:SY=B:RETURN
670 IFY(PL)<10ORY(PL)>180ORX(PL)<0ORX(PL)>256THENP=8:RETURN:ELSEP=PPOINT(HP(X(PL))+11,Y(PL)-10):RETURN
680 IFY(T)<10ORY(T)>180ORX(T)<0ORX(T)>7THENP=8:RETURN:ELSEP=PPOINT(HP(X(T))+11,Y(T)-10):RETURN
690 CLS:IFT=1THENW=2:ELSEW=1
700 PRINT@72,"PLAYER ";W;" WINS":WN(W)=WN(W)+1:TI$="V31;T2;L40;O2;G;P40;A;P40;L20;B;O3;P60;L10;E;P40;L20;C;P70;L5;E;":PLAYTI$:PRINT@163,"PLAYER 1 HAS WON ";WN(1);" GAMES":PRINT@195,"PLAYER 2 HAS WON ";WN(2);" GAMES"
710 PRINT:PRINT:PRINT"        PLAY AGAIN"
720 POKE338,0
730 IFPEEK(338)=254THENA$="Y":GOTO750
740 :A$=INKEY$:IF A$=""THEN730
750 IF A$="Y" THEN RESTORE:GOTO70 ELSE END
760 DRAW"BM70,93;S16;XA$;C6"
770 TI$="S2;D50;U30;E25;G25;F28;BR15;U50;F30;D20;U50;BR20;D50"
780 DRAW"BM10,140;"+TI$
790 CIRCLE(76,152),15,6,1,0.05,.8
800 TI$="BM88,154;H5;L10;G5;BD20;BR30;U50;D25;R35;U25;D50;BR20;U60;L220;BR220;R130;BL80;BD20;H10;L5;G10;F10;R10;F10;D8;G15;L7;H10;BD10;BR80;U50;D25;L30;U25;D50;BR50;U50;BR20;R25;BL25;D20;R20;BL20;D30;BR45;U62;L40;R80"
810 DRAW TI$
820 SCREEN 1,1
830 TI$="V31;T2;L4;O2;D;P50;D;P50;D;L6;O1;B;P50;O2;L16;E;L4;D;P50;L6;O1;B;P50;O2;L16;E;L4;D"
840 PLAY TI$
850 FORT=1TO1000:NEXT
860 CLS:PRINT@32,TAB(10)"KNIGHTSHIFT"
870 PRINT@96," IN THE 13TH CENTURY, TWO KINGS  SOUGHT TO EXPAND THEIR DOMAINS  AND SET OUT TO CAPTURE CASTLES  BELONGING TO ANY MEMBERS OF  A  ROYAL FAMILY.   THE VICTORIOUS"
880 PRINT" KING WOULD BE HE WHO WAS LAST   TO ATTACK OR CAPTURE A CASTLE."
890 PRINT:PRINT" THE RULES WERE CLEAR- MOVE ONE  CASTLE PER DAY (MOVE)  -   AND  ATTACK HORIZONTALLY,VERTICALLY  AND DIAGONALLY ONLY.   CHARGE!"
900 POKE 338,0
910 IF PEEK(338)<>254 AND PEEK(338)<>253 THEN 910
920 PCLS:SCREEN1,1:DRAW"S4;C0;":RETURN
